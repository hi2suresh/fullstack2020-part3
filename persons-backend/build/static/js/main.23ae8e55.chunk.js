(this.webpackJsonptest2=this.webpackJsonptest2||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=t(3),l=t.n(u),i=t(4),m=t(2),s=function(e){var n=e.onHandleAdd,t=e.onNameChange,a=e.onNumberChange,o=e.newName,c=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d="api/persons",f=function(){return l.a.get(d).then((function(e){return e.data}))},h=function(e){return l.a.post(d,e).then((function(e){return e.data}))},b=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var n=e.showThesePersons,t=e.setPersons;return r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number,r.a.createElement("button",{key:e.id,onClick:function(){return n=e.id,a=e.name,console.log(n),void(window.confirm("Do you really want to delete ".concat(a,"?"))&&v(n).then((function(e){console.log(e),f().then((function(e){t(e)}))})));var n,a}},"delete")," ")})))},p=function(e){var n=e.onFilterChange,t=e.filterValue;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:n,value:t}))},w=function(e){var n=e.message;if(0===n.length)return null;var t=n.toLowerCase().includes("add")||n.toLowerCase().includes("update");return r.a.createElement("div",{className:t?"note":"error"},n)},g=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],o=n[1];Object(a.useEffect)((function(){f().then((function(e){o(e)}))}),[]);var c=Object(a.useState)(!0),u=Object(m.a)(c,2),l=u[0],d=u[1],v=Object(a.useState)(""),g=Object(m.a)(v,2),j=g[0],O=g[1],C=Object(a.useState)(""),N=Object(m.a)(C,2),k=N[0],y=N[1],S=Object(a.useState)(""),P=Object(m.a)(S,2),A=P[0],L=P[1],T=Object(a.useState)(""),F=Object(m.a)(T,2),D=F[0],H=F[1],I=l?t:t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return console.log(I),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:k}),r.a.createElement(p,{onFilterChange:function(e){O(e.target.value),d(!1)},filterValue:j}),r.a.createElement("h2",null,"Add a new Name and Number"),r.a.createElement(s,{onHandleAdd:function(e){e.preventDefault();var n=t.find((function(e){return e.name===A}));if(n){if(window.confirm("".concat(A," is already added to phonebook, replace the old number with new one?"))){var a=Object(i.a)(Object(i.a)({},n),{},{number:D});b(n.id,a).then((function(e){o(t.map((function(e){return e.id===n.id?a:e}))),y("Updated ".concat(a.name," with ").concat(a.number))})).catch((function(e){"error",y("Information of '".concat(n.name,"' failed to update"))}))}setTimeout((function(){y(""),"note"}),4e3)}else{var r={name:A,number:D};h(r).then((function(e){o(t.concat(e)),y("Added ".concat(r.name)),console.log(t),I=t,setTimeout((function(){y("")}),3e3)})),f().then((function(e){o(e)}))}L(""),H(""),d(!0)},onNameChange:function(e){L(e.target.value)},onNumberChange:function(e){return H(e.target.value)},newName:A,newNumber:D}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{showThesePersons:I,setPersons:o}))};t(37);c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.23ae8e55.chunk.js.map